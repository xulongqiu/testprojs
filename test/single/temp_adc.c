/*************************************************************************
> File: temp_adc.c
> Author: eric.xu
> Mail:   eric.xu@libratone.com.cn
> Time:   2017年05月27日 星期六 16时21分12秒
*************************************************************************/

#include<stdio.h>
#include<stdint.h>

typedef struct adc2temp {
    uint16_t adc;
    int temp;
} adc2temp_t;

static adc2temp_t battery_temp_table[] = {
    {669, -40},
    {665, -39},
    {661, -38},
    {658, -37},
    {654, -36},
    {651, -35},
    {646, -34},
    {642, -33},
    {638, -32},
    {634, -31},
    {630, -30},
    {625, -29},
    {620, -28},
    {615, -27},
    {610, -26},
    {605, -25},
    {599, -24},
    {593, -23},
    {588, -22},
    {582, -21},
    {577, -20},
    {570, -19},
    {564, -18},
    {557, -17},
    {551, -16},
    {545, -15},
    {538, -14},
    {531, -13},
    {524, -12},
    {517, -11},
    {511, -10},
    {503, -9},
    {496, -8},
    {489, -7},
    {482, -6},
    {475, -5},
    {467, -4},
    {459, -3},
    {452, -2},
    {444, -1},
    {437, 0},
    {429, 1},
    {421, 2},
    {414, 3},
    {406, 4},
    {399, 5},
    {391, 6},
    {384, 7},
    {376, 8},
    {369, 9},
    {362, 10},
    {354, 11},
    {347, 12},
    {339, 13},
    {332, 14},
    {325, 15},
    {318, 16},
    {311, 17},
    {304, 18},
    {297, 19},
    {291, 20},
    {284, 21},
    {277, 22},
    {271, 23},
    {264, 24},
    {258, 25},
    {252, 26},
    {246, 27},
    {240, 28},
    {234, 29},
    {228, 30},
    {222, 31},
    {217, 32},
    {211, 33},
    {206, 34},
    {201, 35},
    {196, 36},
    {191, 37},
    {186, 38},
    {181, 39},
    {177, 40},
    {172, 41},
    {168, 42},
    {163, 43},
    {159, 44},
    {155, 45},
    {151, 46},
    {147, 47},
    {143, 48},
    {139, 49},
    {135, 50},
    {131, 51},
    {128, 52},
    {124, 53},
    {121, 54},
    {118, 55},
    {115, 56},
    {112, 57},
    {109, 58},
    {106, 59},
    {103, 60},
    {100, 61},
    {98, 62},
    {95, 63},
    {93, 64},
    {91, 65},
    {88, 66},
    {86, 67},
    {83, 68},
    {81, 69},
    {79, 70},
    {77, 71},
    {75, 72},
    {73, 73},
    {71, 74},
    {70, 75},
    {68, 76},
    {66, 77},
    {64, 78},
    {62, 79},
    {61, 80}
};

uint16_t table[] = {
    669,
    651,
    630,
    605,
    577,
    545,
    511,
    475,
    437,
    399,
    362,
    325,
    291,
    258,
    228,
    201,
    177,
    155,
    135,
    118,
    103,
    91,
    79,
    70,
    61,
    0
};

int main(int argc, const char* argv)
{
    int temp = 0;
    uint8_t index = 0;
    uint8_t subIndex = 0;
    uint16_t adc = 0;

    for (temp = 0; temp < 120; temp++) {
        index = temp / 5;
        subIndex = temp % 5;

        if (table[index + 1] == 0) {
            break;
        }

        adc = table[index] - (table[index] - table[index + 1]) / 5.0 * subIndex;
        printf("{%d, %d},\n", adc, temp - 40);
    }

    return 0;
}
